<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Angular · Hexo of Tilly Vally @ GitHub</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--></head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">主页</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   博客</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li><li class="nav-list-item"><a href="https://github.com/xxxxx" target="_blank" class="nav-link">   github</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2016/03/25/AngularJS/" class="post-title-link">Angular</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/tags/Angular/" class="post-tag-link">Angular</a></li><li class="post-tag-item"><a href="/tags/JavaScript/" class="post-tag-link">JavaScript</a></li></ul><div class="post-time">星期五, 七月 15日 2016</div></div><div class="post-content"><h1 id="u542F_u52A8_u65B9_u5F0F"><a href="#u542F_u52A8_u65B9_u5F0F" class="headerlink" title="启动方式"></a>启动方式</h1><p>有两种启动方式:自动和手动.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// example-declarative/public/index.html</span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Declarative App<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-controller</span>=<span class="value">"BodyController"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span> <span class="attribute">ng-repeat</span>=<span class="value">"animal in animals"</span>&gt;</span>&#123;&#123;animal&#125;&#125;<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angularjs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">        <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, []);</span><br><span class="line">        app.controller(<span class="string">'BodyController'</span>, <span class="function"><span class="keyword">function</span><span class="params">($scope)</span> </span>&#123;</span><br><span class="line">            $scope.animals = [<span class="string">'cats'</span>, <span class="string">'dogs'</span>, <span class="string">'aardvarks'</span>, <span class="string">'hamsters'</span>, <span class="string">'squirrels'</span>];</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>ng-app</code> 指令被关联到页面<code>html</code>标签,当页面加载完成，Angular自动检查这个指令是否存在。如果存在，它引用的模块将作为应用的基础模块，即代表应用本身的模块。这个模块将自动被初始化，这时，应用已准备完成。</p>
<p>对大多数应用来说，Angular的自动启动过程已经足够用了。但在某些特定情况下，在更大程度上控制这一过程也很有用处。在这些情况下，需要手动初始化Angular的启动过程,如下例所示:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Listing <span class="number">8</span>-<span class="number">5.</span> 推迟Angular的启动过程,直到基于jQuery的初始化AJAX请求完成.</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    <span class="string">'url'</span>: <span class="string">'/api/data'</span>,</span><br><span class="line">    <span class="string">'type'</span>: <span class="string">'GET'</span></span><br><span class="line">&#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    angular.bootstrap(<span class="built_in">document</span>, [<span class="string">'app'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>在这个例子中,Angular的启动过程推迟至一个初始AJAX请求完成后,只有在这个时候,才调用Angular的<code>bootstrap()</code>方法,传递DOM对象作为应用的容器(即“root element”),object to serve as a container for our application<br>(its ), 传递作为依赖的一个数组指定了一个名为<code>app</code>的模块(这个模块代表应用).</p>
<p>注意:大多数时候, 一个页面内只有一个Angular应用.但多个Angular应用可以共存在一个页面内.这时候,只有一个Angular应用可以自动启动,其它的要手动启动.</p>
<h1 id="Directives_3A_DOM_u7684_u62BD_u8C61_u5C42"><a href="#Directives_3A_DOM_u7684_u62BD_u8C61_u5C42" class="headerlink" title="Directives: DOM的抽象层"></a>Directives: DOM的抽象层</h1><p>Angular directives可被当作DOM的抽象层, 为开发人员提供一种机制,以创建复杂的WEB组件,这些组件可通过简单的HTML标记调用. Listing 8-7是一个帮助理解这一概念的例子.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Listing 8-7. Example Demonstrating the Creation of a Simple Angular Directive</span><br><span class="line">// example-directive1/public/index.html</span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Example Directive<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/css/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/bower_components/bootstrap/dist/css/bootstrap.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">news-list</span>&gt;</span><span class="tag">&lt;/<span class="title">news-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angularjs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, []);</span><br><span class="line">    app.directive(<span class="string">'newsList'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">'restrict'</span>: <span class="string">'E'</span>,</span><br><span class="line">            <span class="string">'replace'</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">'templateUrl'</span>: <span class="string">'/templates/news-list.html'</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在应用模块创建之后，通过调用应用模块的<code>directive()</code>方法，为Angular定义了一个新的指令：名称和负责返回对象的工厂函数。工厂函数返回的对象通常有要定义的选项, 在这个简单的例子中是三项：</p>
<ul>
<li>restrict: 限定这个指令是否与Angular找到的<code>attributes (A)</code>, <code>classes (C)</code>, 或<code>DOM elements (E)</code>（或者是这些项的任意组合）匹配，在这个例子中，值<code>E</code>限定Angular只将指令与标签名匹配的DOM元素配对。定义全部三种只需要传递<code>AEC</code>.</li>
<li>replace: <code>true</code>表明组件应完全代替配对的DOM元素。<code>false</code>允许创建以某种方式对已有元素进行简单扩展的指令，而不是完全代替。</li>
<li>templateUrl: Angular在这个URL找到的标记将代表我们的指令，一旦它被插入到DOM中。也可以用<code>template</code>选项直接传递模板的内容。</li>
</ul>
<p><strong>注意</strong> 在Angular中创建新指令使用camelCase命名方法，在HTML中引用时使用dash-delimited格式。这种区别是因为HTML标记不区分大小写。当Angular解析HTML时, 会自动解决这种命名方法上的差别。</p>
<h1 id="u4F5C_u7528_u57DF_u4E0E_u539F_u578B_u7EE7_u627F"><a href="#u4F5C_u7528_u57DF_u4E0E_u539F_u578B_u7EE7_u627F" class="headerlink" title="作用域与原型继承"></a>作用域与原型继承</h1><p>在Angular启动的过程中，首先会创建一个根对象<code>$rootScope</code>关联到应用的根元素。在后续的解析DOM的过程中（在Angular中这一过程称为编译），当遇到指令时，Angular创建新的对象，从其最近的祖先继承原型，并被分配给当前指令关联的DOM元素。Angular实际上为应用中的每个组件创建了一个沙盒，在Angular术语中称为“scope”。</p>
<h1 id="u4F7F_u7528Controllers_u64CD_u4F5CScope"><a href="#u4F7F_u7528Controllers_u64CD_u4F5CScope" class="headerlink" title="使用Controllers操作Scope"></a>使用Controllers操作Scope</h1><p>在Angular中，<code>controller</code>就是函数，唯一的作用是操作scope对象。Listing 8-9演示了如何通过给负责描述指令的对象添加controller属性以控制作用域对象。指令使用的模板内为Listing 8-10.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">Listing 8-9. Extended Version of Listing 8-7 Example That Adds Custom Behavior to Our New Directive</span><br><span class="line">// example-directive2/public/index.html</span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Example Directive<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/css/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/bower_components/bootstrap/dist/css/bootstrap.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="title">news-list</span>&gt;</span><span class="tag">&lt;/<span class="title">news-list</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angularjs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">        <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, []);</span><br><span class="line">        app.directive(<span class="string">'newsList'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">'restrict'</span>: <span class="string">'E'</span>,</span><br><span class="line">                <span class="string">'replace'</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="string">'controller'</span>: <span class="function"><span class="keyword">function</span><span class="params">($scope, $http)</span> </span>&#123;</span><br><span class="line">                    $http.<span class="keyword">get</span>(<span class="string">'/api/news'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(result)</span> </span>&#123;</span><br><span class="line">                        $scope.items = result.data;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">'templateUrl'</span>: <span class="string">'/templates/news-list.html'</span></span><br><span class="line"></span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">Listing 8-10. Contents of Our Directive’s Template</span><br><span class="line">// example-directive2/public/templates/news-list.html</span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"row"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"col-xs-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-repeat</span>=<span class="value">"item in items"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"media"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"media-left"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="title">img</span> <span class="attribute">class</span>=<span class="value">"media-object"</span> <span class="attribute">ng-src</span>=<span class="value">"&#123;&#123;item.img&#125;&#125;"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"media-body"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="title">h4</span> <span class="attribute">class</span>=<span class="value">"media-heading"</span> <span class="attribute">ng-bind</span>=<span class="value">"item.title"</span>&gt;</span><span class="tag">&lt;/<span class="title">h4</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>controller函数接收两个参数：<code>$scope</code>和<code>$http</code>。</p>
<h1 id="u53CC_u5411_u6570_u636E_u7ED1_u5B9A"><a href="#u53CC_u5411_u6570_u636E_u7ED1_u5B9A" class="headerlink" title="双向数据绑定"></a>双向数据绑定</h1><p>数据绑定是Angular的一项能力，将模板与JavaScript对象(例如一个作用域)进行关联, 使模板引用域内的属性，这样浏览器就可以对其进行渲染。<br><img src="/./img/Angular Data binding.png" alt="Alt text"></p>
<p>Angular还具有反向的绑定能力，即当视图发生变化时，指令对象的域随之更新(例如表单内的值发生变化)。<br><code>$http</code>返回一个数组，这个数组被分配给<code>$scope</code>对象。注意在<code>Listing 8-10</code>中<code>ng-repeat</code>的指令，这个Angular核心指令遍历数组，为数组的每个元素创建<code>&lt;div class=&quot;media&quot;&gt;...&lt;/div&gt;</code>，然后Angular内建的<code>ng-src</code>和<code>ng-bind</code>指令动态分配图片URLs和对应的文本内容。</p>
<h1 id="u901A_u8FC7_u670D_u52A1_u548C_u4F9D_u8D56_u6CE8_u5165_u5B9E_u73B0_u677E_u8026_u5408L"><a href="#u901A_u8FC7_u670D_u52A1_u548C_u4F9D_u8D56_u6CE8_u5165_u5B9E_u73B0_u677E_u8026_u5408L" class="headerlink" title="通过服务和依赖注入实现松耦合L"></a>通过服务和依赖注入实现松耦合L</h1><h2 id="u4F9D_u8D56_u6CE8_u5165"><a href="#u4F9D_u8D56_u6CE8_u5165" class="headerlink" title="依赖注入"></a>依赖注入</h2><p>dependency injection是客户端侧框架世界内较新的概念, Angular对它的应用相应普遍.</p>
<p>首先看一下Listing 8-11, 这个例子是一个基本的Node.js应用，只有一个依赖。<code>fs</code>模块. 在此例中， 我们的模块通过<code>require()</code>方法引入<code>fs</code>模块。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Listing <span class="number">8</span>-<span class="number">11.</span> Node.js Application That Depends on the fs Module</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">fs.readFile(<span class="string">'~/data.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, contents</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(err);</span><br><span class="line">    <span class="built_in">console</span>.log(contents);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>这个例子演示了一个很简单的概念：如果一个模块<em>需要</em>一个依赖组件，那么就直接引入它。<br>但依赖注入与这个概念相反。Listing 8-12演示了Angular中一个依赖注入的例子.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Listing <span class="number">8</span>-<span class="number">12.</span> Dependency Injection <span class="keyword">in</span> Action Within Angular</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, []);</span><br><span class="line">app.controller(<span class="string">'myController'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$http</span>) </span>&#123;</span><br><span class="line">    $http.get(<span class="string">'/api/news'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(result);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>类似Angular这样实现了依赖注入的框架规定了一种通用模式, 模块可以通过中心控制点注册自己.换句话说, 当应用初始化时,模块有机会说:”这是我的名字,你可以在这里找到我”.在之后的程序执行过程中, 已加载模块可以引入这些依赖模块，方法是在其构造函数（或类）中将依赖模块作为参数，顺序不重要。再来看一下Listing 8-12.新的<code>app</code>模块被创建以代表应用，接着在应用模块中创建了名为<code>myController</code>的控制器，构造函数作为参数被传递以在创建新实例时调用。注意传递给控制器构造函数的实参<code>$http</code>; 这就是依赖注入工作的一个例子。控制器引用的<code>$http</code>依赖是Angular核心库中的模块。在应用启动阶段，Angular以服务的形式注册了这个模块。</p>
<p><strong>注意</strong> 按惯例，Angular提供的核心服务、APIs和属性以$为前缀. </p>
<h2 id="Thin_Controllers_and_Fat_Services"><a href="#Thin_Controllers_and_Fat_Services" class="headerlink" title="Thin Controllers and Fat Services"></a>Thin Controllers and Fat Services</h2><p>在Listing 8-9中,控制器创建一AJAX请求，返回了存储头条新闻的数组。但这个例子没有在应用中共享这些功能的方法。我们可以将这个获取头条新闻的逻辑进行抽象，创建一个可在应用重复使用的API。这样做的好处是可以改变URL。</p>
<p>Angular服务是实现这一目标的工具。服务是创建定义良好的接口的机制，可在应用中被共享和重用。当大量的Angular应用逻辑以这种方式组织后，控制器才能成为应该成为的那样：一个薄胶水层作为绑定作用域与服务，只对特定的视图起作用。</p>
<p>在Angular中, 有三大类服务类型:factories, services, and providers.</p>
<h2 id="Factories"><a href="#Factories" class="headerlink" title="Factories"></a>Factories</h2><p>Listing 8-13 基于Listing 8-9，将获取头条新闻的程序逻辑移动了一个工厂函数内。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">Listing 8-13. Angular headlines Factory That Provides an API for Fetching News Headlines</span><br><span class="line">// example-directive3/public/index.html</span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Example Directive<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/css/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/bower_components/bootstrap/dist/css/bootstrap.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">news-list</span>&gt;</span><span class="tag">&lt;/<span class="title">news-list</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angularjs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">        <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, []);</span><br><span class="line">        app.directive(<span class="string">'newsList'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">'restrict'</span>: <span class="string">'E'</span>,</span><br><span class="line">            <span class="string">'replace'</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">'controller'</span>: <span class="function"><span class="keyword">function</span><span class="params">($scope, headlines)</span> </span>&#123;</span><br><span class="line">                headlines.fetch().then(<span class="function"><span class="keyword">function</span><span class="params">(items)</span> </span>&#123;</span><br><span class="line">                    $scope.items = items;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">'templateUrl'</span>: <span class="string">'/templates/news-list.html'</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    app.factory(<span class="string">'headlines'</span>, <span class="function"><span class="keyword">function</span><span class="params">($http)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">'fetch'</span>: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> $http.<span class="keyword">get</span>(<span class="string">'/api/news'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(result)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> result.data;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>headlines</code>工厂返回一个带有<code>fetch()</code>方法的对象，当该方法被调用时，会查询新闻并以promise的形式返回.<br>在绝大多数Angular应用中，factories是最常使用的服务类型。当工厂第一次被作为依赖引用时，Angular调用工厂函数并返回结果给请求者。服务的后续引用将接收首次服务被引用时返回的同样的结果. 换句话说，工厂可被认为是单次实例,只被调用一次.</p>
<h2 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h2><p>Listing 8-14基于Listing 8-9,将获取新闻的程序逻辑移动到一个服务中.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">Listing 8-14. Angular headlines Service That Provides an API for Fetching News Headlines</span><br><span class="line">// example-directive4/public/index.html</span><br><span class="line"></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Example Directive<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/css/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/bower_components/bootstrap/dist/css/bootstrap.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">news-list</span>&gt;</span><span class="tag">&lt;/<span class="title">news-list</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angularjs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, []);</span><br><span class="line">    app.directive(<span class="string">'newsList'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">'restrict'</span>: <span class="string">'E'</span>,</span><br><span class="line">            <span class="string">'replace'</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">'controller'</span>: <span class="function"><span class="keyword">function</span><span class="params">($scope, headlines)</span> </span>&#123;</span><br><span class="line">                headlines.fetch().then(<span class="function"><span class="keyword">function</span><span class="params">(items)</span> </span>&#123;</span><br><span class="line">                    $scope.items = items;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">'templateUrl'</span>: <span class="string">'/templates/news-list.html'</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    app.service(<span class="string">'headlines'</span>, <span class="function"><span class="keyword">function</span><span class="params">($http)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fetch = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> $http.<span class="keyword">get</span>(<span class="string">'/api/news'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(result)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> result.data;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在Angular中, services函数与factories几乎一样,只有一点关键区别。工厂函数可以简单调用，服务函数通过<code>new</code>关键字作为构造函数调用, 允许它们以类的形式定义并初始化.采用哪种方式更多地由风格偏好决定,最终结果都一样.<br>在这个例子中,与工厂函数返回一个对象相反,<code>fetch()</code>方法被分配给<code>this</code>, 即服务构造函数最终返回的对象.</p>
<h2 id="Providers"><a href="#Providers" class="headerlink" title="Providers"></a>Providers</h2><p>Listing 8-15基于Listing 8-9,将获取新闻的逻辑移动provider中.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">Listing 8-15. Angular headlines Provider That Provides an API for Fetching News Headlines</span><br><span class="line">// example-directive5/public/index.html</span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Example Directive<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/css/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/bower_components/bootstrap/dist/css/bootstrap.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">news-list</span>&gt;</span><span class="tag">&lt;/<span class="title">news-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angularjs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, []);</span><br><span class="line">    app.directive(<span class="string">'newsList'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">'restrict'</span>: <span class="string">'E'</span>,</span><br><span class="line">            <span class="string">'replace'</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">'controller'</span>: <span class="function"><span class="keyword">function</span><span class="params">($scope, headlines)</span> </span>&#123;</span><br><span class="line">                headlines.fetch().then(<span class="function"><span class="keyword">function</span><span class="params">(items)</span> </span>&#123;</span><br><span class="line">                    $scope.items = items;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">'templateUrl'</span>: <span class="string">'/templates/news-list.html'</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    app.config(<span class="function"><span class="keyword">function</span><span class="params">(headlinesProvider)</span> </span>&#123;</span><br><span class="line">        headlinesProvider.limit = <span class="number">10</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    app.provider(<span class="string">'headlines'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.$<span class="keyword">get</span> = <span class="function"><span class="keyword">function</span><span class="params">($http)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">'fetch'</span>: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> $http.<span class="keyword">get</span>(<span class="string">'/api/news'</span>, &#123;</span><br><span class="line">                        <span class="string">'params'</span>: &#123;</span><br><span class="line">                            <span class="string">'limit'</span>: self.limit || <span class="number">20</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;).then(<span class="function"><span class="keyword">function</span><span class="params">(result)</span> </span>&#123;</span><br><span class="line">                       <span class="keyword">return</span> result.data;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>与factories和services不同, 它们对自己的设置完全负责,而Angular providers允许在其父模块配置阶段对其进行配置. 这种方式使providers可被当作可配置的工厂. 在这个例子中,定义了一个headlines provider,其功能与Listing 8-13中的工厂一致.只是这次,<code>fetch()</code>方法传递了一个可配置的<code>limit</code>参数,以限定获取新闻的条数. 在Listing 8-15中, providr中定义了一个工厂函数<code>this.$get</code>.当headlines provider被作为依赖引用时,Angular调用这个函数并返回结果, 与Listing 8-13中工厂函数很像. </p>
<h1 id="Creating_Routes"><a href="#Creating_Routes" class="headerlink" title="Creating Routes"></a>Creating Routes</h1><p>由Angular这类框架创建的所谓“single-page applications”，为用户提供了与传统桌面应用类似的体验。在单一的页面前期加载过程中，加载所有（或大部分）应用所需的不同资源。后续对不同URLs的请求被后台AJAX requests截取并处理,而不是请求刷新整个页面。Angular的<code>ngRoute</code>模块就是用于此用途。</p>
<p>Listing 8-16基于Listing 8-13. 但这次在应用中增加了两个routes，使用户可以被引导到标记为“Dashboard”和“News Headlines.” 只有在用户浏览到<code>/#/headlines</code> route，<code>newsList</code>指令才被插入到页面。实现步骤如下：</p>
<ol>
<li>定义配置模块，以在应用启动阶段执行。在这个函数中，引用由Angular的<code>angular-route</code>包提供的<code>$routeProvider</code> service，这个包必须与Angular的核心库一起安装.</li>
<li>定义数组<code>routes</code>, 数组元素是定义了不同路径的对象。在Listing 8-16中，每个对象的<code>route</code>属性定义了加载路径的位置, 而<code>config</code>属性允许定义一个控制器函数和模板，在合适的时间加载。</li>
<li>遍历<code>routes</code>数组的每个元素，为<code>$routeProvider</code> service的<code>when()</code>方法传递适当的属性。通过这种简单的方法，可以定义多个routes. 另一种不用数组的方式是，进行两次独立显示地<code>$routeProvider.when()</code>方法调用.</li>
<li>利用<code>$routeProvider.otherwise()</code>方法定义一个默认route，以在没有指定路径（或路径无效）的情况下加载。</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Listing 8-16. Angular Application That Defines Two Routes, dashboard and headlines</span><br><span class="line">// example-router1/public/index.html</span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Routing Example<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/css/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/bower_components/bootstrap/dist/css/bootstrap.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">ng-view</span>&gt;</span><span class="tag">&lt;/<span class="title">ng-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angularjs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angular-route/angular-route.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/modules/news-list.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, [<span class="string">'ngRoute'</span>, <span class="string">'newsList'</span>]);</span><br><span class="line">    app.config(<span class="function"><span class="keyword">function</span><span class="params">($routeProvider)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> routes = [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">'route'</span>: <span class="string">'/dashboard'</span>,</span><br><span class="line">                <span class="string">'config'</span>: &#123;</span><br><span class="line">                    <span class="string">'templateUrl'</span>: <span class="string">'/templates/dashboard.html'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">'route'</span>: <span class="string">'/headlines'</span>,</span><br><span class="line">                <span class="string">'config'</span>: &#123;</span><br><span class="line">                    <span class="string">'controller'</span>: <span class="function"><span class="keyword">function</span><span class="params">($log)</span> </span>&#123;</span><br><span class="line">                        $log.debug(<span class="string">'Welcome to the headlines route.'</span>);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="string">'templateUrl'</span>: <span class="string">'/templates/headlines.html'</span></span><br><span class="line">                &#125;   </span><br><span class="line">            &#125;</span><br><span class="line">        ];  </span><br><span class="line">        routes.forEach(<span class="function"><span class="keyword">function</span><span class="params">(route)</span> </span>&#123;</span><br><span class="line">            $routeProvider.when(route.route, route.config);</span><br><span class="line">        &#125;);</span><br><span class="line">        $routeProvider.otherwise(&#123;</span><br><span class="line">            <span class="string">'redirectTo'</span>: <span class="string">'/dashboard'</span> <span class="comment">// Our default route</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Route_Parameters"><a href="#Route_Parameters" class="headerlink" title="Route Parameters"></a>Route Parameters</h2><p>在实际应用中，大多数存在于Angular应用中的路径，提供基于一个或多个参数值而变化的动态内容. Listing 8-17演示了这一点是如何做到的。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">Listing 8-17. Angular Application with Routes That Vary Their Content Based on the Value of an Expected</span><br><span class="line">Parameter</span><br><span class="line">// example-router2/public/index.html</span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Routing Example<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/css/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/bower_components/bootstrap/dist/css/bootstrap.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">ng-view</span>&gt;</span><span class="tag">&lt;/<span class="title">ng-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angularjs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angular-route/angular-route.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, [<span class="string">'ngRoute'</span>]);</span><br><span class="line">    app.config(<span class="function"><span class="keyword">function</span><span class="params">($routeProvider)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> routes = [&#123;</span><br><span class="line">            <span class="string">'route'</span>: <span class="string">'/dashboard'</span>,</span><br><span class="line">            <span class="string">'config'</span>: &#123;</span><br><span class="line">                <span class="string">'templateUrl'</span>: <span class="string">'/templates/dashboard.html'</span>,</span><br><span class="line">                <span class="string">'controller'</span>: <span class="function"><span class="keyword">function</span><span class="params">($scope, $http)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> $http.<span class="keyword">get</span>(<span class="string">'/api/animals'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(result)</span> </span>&#123;</span><br><span class="line">                        $scope.animals = result.data;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">'route'</span>: <span class="string">'/animals/:animalID'</span>,</span><br><span class="line">            <span class="string">'config'</span>: &#123;</span><br><span class="line">                <span class="string">'templateUrl'</span>: <span class="string">'/templates/animal.html'</span>,</span><br><span class="line">                <span class="string">'controller'</span>: <span class="function"><span class="keyword">function</span><span class="params">($scope, $route, $http)</span> </span>&#123;</span><br><span class="line">                    $http.<span class="keyword">get</span>(<span class="string">'/api/animals/'</span> + $route.current.params.animalID).</span><br><span class="line">                    then(<span class="function"><span class="keyword">function</span><span class="params">(result)</span> </span>&#123;</span><br><span class="line">                       $scope.animal = result.data;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">        routes.forEach(<span class="function"><span class="keyword">function</span><span class="params">(route)</span> </span>&#123;</span><br><span class="line">            $routeProvider.when(route.route, route.config);</span><br><span class="line">        &#125;);</span><br><span class="line">        $routeProvider.otherwise(&#123;</span><br><span class="line">         <span class="string">'redirectTo'</span>: <span class="string">'/dashboard'</span> <span class="comment">// Our default route</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Route_Resolutions"><a href="#Route_Resolutions" class="headerlink" title="Route Resolutions"></a>Route Resolutions</h2><p>如果一切正常，单页面应用可为用户提供大幅改进的体验. 这种改进不是的白来的。在单页面应用生命周期内，协调不同的API调用是一项很难度的工作。<br>Angular的<code>ngRoute</code>模块可帮助改善这种复杂性：解析。</p>
<p>解析定义了在变换到一个特定路径前，必须执行的一个或多个步骤. 如果某个路径的全部resolutions都返回promises, 那么只有在所有promises都兑现的情况，路径变化才能完成。Listing 8-18 演示了路径解析是如何工作的.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Listing 8-18. Route Resolutions in Action</span><br><span class="line">// example-router3/public/index.html</span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Routing Example<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/css/style.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/bower_components/bootstrap/dist/css/bootstrap.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">    <span class="tag">&lt;<span class="title">ng-view</span>&gt;</span><span class="tag">&lt;/<span class="title">ng-view</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angularjs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/bower_components/angular-route/angular-route.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>, [<span class="string">'ngRoute'</span>]);</span><br><span class="line">    app.config(<span class="function"><span class="keyword">function</span><span class="params">($routeProvider)</span> </span>&#123;</span><br><span class="line">        $routeProvider.when(<span class="string">'/dashboard'</span>, &#123;</span><br><span class="line">            <span class="string">'templateUrl'</span>: <span class="string">'/templates/dashboard.html'</span>,</span><br><span class="line">            <span class="string">'controller'</span>: <span class="function"><span class="keyword">function</span><span class="params">($scope, animals, colors)</span> </span>&#123;</span><br><span class="line">                $scope.animals = animals;</span><br><span class="line">                $scope.colors = colors;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">'resolve'</span>: &#123;</span><br><span class="line">                <span class="string">'animals'</span>: <span class="function"><span class="keyword">function</span><span class="params">($http)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> $http.<span class="keyword">get</span>(<span class="string">'/api/animals'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(result)</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> result.data;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">'colors'</span>: <span class="function"><span class="keyword">function</span><span class="params">($http)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> $http.<span class="keyword">get</span>(<span class="string">'/api/colors'</span>).then(<span class="function"><span class="keyword">function</span><span class="params">(result)</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> result.data;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        $routeProvider.otherwise(&#123;</span><br><span class="line">            <span class="string">'redirectTo'</span>: <span class="string">'/dashboard'</span> <span class="comment">// Our default route</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在此例中，一个路径被定义为在调用相应的API获取信息后，显示动物清单和颜色. 这里没有直接在路径的控制器中请求信息，而是在路径的<code>resolve</code>对象中。相应地，当路径的控制器函数被调用后，可以确定请求已完成.</p>
</div></article><div class="pagination"><a href="/2016/06/27/JQuery EasyUI Sourece Code Analysis/" class="pagination-prev">PREV</a><a href="/2016/03/23/demystifying-javascript-closures-callbacks-iifes/" class="pagination-next">NEXT</a></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Browserify/">Browserify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Callback/">Callback</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Closure/">Closure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Event/">Event</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/07/14/Table Layout in CSS/">Table Layout in CSS</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/14/Exam Analysis/">Exam Analysis</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/27/JQuery EasyUI Sourece Code Analysis/">JQuery EasyUI Sourece Code Analysis</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/25/AngularJS/">Angular</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/23/demystifying-javascript-closures-callbacks-iifes/">demystifying-javascript-closures-callbacks-iifes</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/01/Browserify/">Browserify</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/26/strict-mode/">strict mode</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/26/Try{} and Catch{}/">Try{} and Catch{}</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>© 2016 <a href="/">Tilly Vally</P></div><div class="power"><p><a href="http://pinggod.com/">Sean Sun</a>, 
<a href="https://hexo.io">Hexo</a>, 
<a href="https://github.com/">GitHub</a>, 
<a href="https://jekyllrb.com/">Jekyll</a></p></div></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?a36e15d9e2adec9a21fcdd9f686b1ed2";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>