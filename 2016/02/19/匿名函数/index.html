<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 匿名函数 · Hexo of Tilly Vally @ GitHub</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--></head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">主页</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   博客</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li><li class="nav-list-item"><a href="https://github.com/xxxxx" target="_blank" class="nav-link">   github</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2016/02/19/匿名函数/" class="post-title-link">匿名函数</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/tags/Function/" class="post-tag-link">Function</a></li><li class="post-tag-item"><a href="/tags/JavaScript/" class="post-tag-link">JavaScript</a></li></ul><div class="post-time">星期五, 七月 15日 2016</div></div><div class="post-content"><h1 id="u533F_u540D_u51FD_u6570"><a href="#u533F_u540D_u51FD_u6570" class="headerlink" title="匿名函数"></a>匿名函数</h1><p>Anonymous functions典型地用于那些不需要函数名称以备再次引用它们。</p>
<h2 id="u521B_u5EFA_u5BF9_u8C61_u65F6_u7684_u533F_u540D_u51FD_u6570"><a href="#u521B_u5EFA_u5BF9_u8C61_u65F6_u7684_u533F_u540D_u51FD_u6570" class="headerlink" title="创建对象时的匿名函数"></a>创建对象时的匿名函数</h2><p>匿名函数可被分配给对象的属性，通过dot (.)操作符调用这个函数。 看下面的例程：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> santa = &#123;</span><br><span class="line">	say :<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"ho ho ho"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line">santa.say();</span><br></pre></td></tr></table></figure></p>
<p>上例中，创建了一个对象，这个对象有一个名为<strong>say</strong>的属性，这是一个匿名函数。在这种情况下，这个属性被认为是一个方法而不是一个函数。不需要命名函数，因为可以通过对象属性来调用。这是一种常用的方式。</p>
<h2 id="u521B_u5EFA_u5217_u8868_u65F6_u7684_u533F_u540D_u51FD_u6570"><a href="#u521B_u5EFA_u5217_u8868_u65F6_u7684_u533F_u540D_u51FD_u6570" class="headerlink" title="创建列表时的匿名函数"></a>创建列表时的匿名函数</h2><p>现在要创建两个匿名函数，将其加入到一个数组中。接着，循环遍历数组并执行对应的函数:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"><span class="keyword">var</span> things = [</span><br><span class="line">	<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(<span class="string">"ThingOne"</span>) &#125;,</span><br><span class="line">	<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(<span class="string">"ThingTwo"</span>) &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> x=<span class="number">0</span>; x&lt;things.length; x++) &#123;</span><br><span class="line">	things[x]();</span><br><span class="line">&#125; </span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="u4F5C_u4E3A_u53E6_u4E00_u4E2A_u51FD_u6570_u7684_u5F62_u53C2_u7684_u533F_u540D_u51FD_u6570"><a href="#u4F5C_u4E3A_u53E6_u4E00_u4E2A_u51FD_u6570_u7684_u5F62_u53C2_u7684_u533F_u540D_u51FD_u6570" class="headerlink" title="作为另一个函数的形参的匿名函数"></a>作为另一个函数的形参的匿名函数</h2><p>这也是常用模式之一，在大多数专业库中可以见到：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function statement</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eventHandler</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">	event();</span><br><span class="line">&#125;</span><br><span class="line">eventHandler(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//do a lot of event related things</span></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"Event fired"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>这里将一个匿名函数传递给另一个函数。在接收函数中，执行作为参数传递过来的匿名函数。在创建单次使用函数如对象的方法或事件句柄时非常方便。匿名函数语法比函数声明后再调用这样的两步方式更精简。</p>
<h2 id="u5728_u6761_u4EF6_u903B_u8F91_u4E2D_u7684_u51FD_u6570"><a href="#u5728_u6761_u4EF6_u903B_u8F91_u4E2D_u7684_u51FD_u6570" class="headerlink" title="在条件逻辑中的函数"></a>在条件逻辑中的函数</h2><p>可以使用匿名函数表达式以根据条件改变其行为：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shape;</span><br><span class="line"><span class="keyword">if</span>(shape_name === <span class="string">"SQUARE"</span>) &#123;</span><br><span class="line">	shape = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"drawing square"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">	shape = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"drawing square"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line">alert(shape());</span><br></pre></td></tr></table></figure></p>
<p>这里，根据条件判断，赋与<strong>shape</strong>以不同的实现。这种模式如果小心使用帮助很大。但过度使用会导致不可读和难以调试的代码。</p>
</div></article><div class="pagination"><a href="/2016/02/22/Closures/" class="pagination-prev">PREV</a><a href="/2016/02/19/Scoping-作用域/" class="pagination-next">NEXT</a></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Browserify/">Browserify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Callback/">Callback</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Closure/">Closure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Event/">Event</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/07/14/Table Layout in CSS/">Table Layout in CSS</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/14/Exam Analysis/">Exam Analysis</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/27/JQuery EasyUI Sourece Code Analysis/">JQuery EasyUI Sourece Code Analysis</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/25/AngularJS/">Angular</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/23/demystifying-javascript-closures-callbacks-iifes/">demystifying-javascript-closures-callbacks-iifes</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/01/Browserify/">Browserify</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/26/strict-mode/">strict mode</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/26/Try{} and Catch{}/">Try{} and Catch{}</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>© 2016 <a href="/">Tilly Vally</P></div><div class="power"><p><a href="http://pinggod.com/">Sean Sun</a>, 
<a href="https://hexo.io">Hexo</a>, 
<a href="https://github.com/">GitHub</a>, 
<a href="https://jekyllrb.com/">Jekyll</a></p></div></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?a36e15d9e2adec9a21fcdd9f686b1ed2";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>